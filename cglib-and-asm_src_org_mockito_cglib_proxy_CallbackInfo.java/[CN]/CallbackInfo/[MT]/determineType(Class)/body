{
  Class cur=null;
  for (int i=0; i < CALLBACKS.length; i++) {
    CallbackInfo info=CALLBACKS[i];
    if (info.cls.isAssignableFrom(callbackType)) {
      if (cur != null) {
        throw new IllegalStateException("Callback implements both " + cur + " and "+ info.cls);
      }
      cur=info.cls;
    }
  }
  if (cur == null) {
    throw new IllegalStateException("Unknown callback type " + callbackType);
  }
  return Type.getType(cur);
}
