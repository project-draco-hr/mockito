{
  MockitoObjectMethodsFilter<MockInvocationHandler> handler;
  try {
    if (Enhancer.isEnhanced(mock.getClass())) {
      handler=(MockitoObjectMethodsFilter)getInterceptor(mock).getHandler();
    }
 else     if (Proxy.isProxyClass(mock.getClass())) {
      handler=(MockitoObjectMethodsFilter)Proxy.getInvocationHandler(mock);
    }
 else {
      throw new RuntimeExceptionWrapper(new IllegalArgumentException("Not a mock: " + mock.getClass().getName()));
    }
    return handler.getDelegate().getControl();
  }
 catch (  ClassCastException e) {
    throw new RuntimeExceptionWrapper(new IllegalArgumentException("Not a mock: " + mock.getClass().getName()));
  }
}
