{
  if (!actual.getMethod().isVarArgs()) {
    return false;
  }
  Object[] rawArgs=actual.getRawArguments();
  List<Matcher> matchers=invocationMatcher.getMatchers();
  if (rawArgs.length != matchers.size()) {
    return false;
  }
  for (int i=0; i < rawArgs.length; i++) {
    Matcher m=matchers.get(i);
    if (rawArgs[i] != null && rawArgs[i].getClass().isArray() && i == rawArgs.length - 1) {
      Matcher actualMatcher;
      if (m instanceof MatcherDecorator) {
        actualMatcher=((MatcherDecorator)m).getActualMatcher();
      }
 else {
        actualMatcher=m;
      }
      if (!(actualMatcher instanceof VarargMatcher) || !actualMatcher.matches(rawArgs[i])) {
        return false;
      }
    }
 else     if (!m.matches(rawArgs[i])) {
      return false;
    }
  }
  return true;
}
