{
  Assume.assumeTrue("CglibMockMaker".equals(Plugins.getMockMaker().getClass().getSimpleName()));
  doInNewChildRealm(testMethodClassLoaderRealm,"org.mockitousage.configuration.ClassCacheVersusClassReloadingTest$DoTheMocking");
  try {
    doInNewChildRealm(testMethodClassLoaderRealm,"org.mockitousage.configuration.ClassCacheVersusClassReloadingTest$DoTheMocking");
    fail("should have raised a ClassCastException when Objenesis Cache is enabled");
  }
 catch (  MockitoException e) {
    assertThat(e.getMessage()).containsIgnoringCase("classloading").containsIgnoringCase("objenesis").containsIgnoringCase("MockitoConfiguration");
    assertThat(e.getCause()).has(cceIsThrownFrom("java.lang.Class.cast")).has(cceIsThrownFrom("org.mockito.internal.creation.cglib.ClassImposterizer.imposterise"));
  }
}
