{
  try {
    mutex.lock();
    if (mockIsCurrentlyBeingReplaced()) {
      return mockitoMock;
    }
    mockReplacementStarted();
    return new AcrossJVMMockSerializationProxy(mockitoMock);
  }
 catch (  IOException ioe) {
    throw new NotSerializableException(mockitoMock.getClass().getCanonicalName());
  }
 finally {
    mockReplacementCompleted();
    mutex.unlock();
  }
}
