{
  debuggingInfo.collectData();
  RunListener listener=new RunListener(){
    @Override public void testFailure(    final Failure failure) throws Exception {
      Throwable throwable=(Throwable)Whitebox.getInternalState(failure,"fThrownException");
      String newMessage=throwable.getMessage();
      newMessage+="\n" + debuggingInfo.getWarnings() + "\n*** The actual failure is because of: ***\n";
      Whitebox.setInternalState(throwable,"detailMessage",newMessage);
    }
  }
;
  notifier.addFirstListener(listener);
}
