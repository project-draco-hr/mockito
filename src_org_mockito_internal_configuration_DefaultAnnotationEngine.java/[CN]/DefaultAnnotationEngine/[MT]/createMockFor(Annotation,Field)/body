{
  if (annotation instanceof Mock || annotation instanceof org.mockito.MockitoAnnotations.Mock) {
    return Mockito.mock(field.getType(),field.getName());
  }
  if (annotation instanceof Captor) {
    Class<?> type=field.getType();
    if (!ArgumentCaptor.class.isAssignableFrom(type)) {
      throw new MockitoException("@Captor field must be of the type ArgumentCaptor.\n" + "Field: '" + field.getName() + "' has wrong type\n"+ "For info how to use @Captor annotations see examples in javadoc for MockitoAnnotations class.");
    }
    return ArgumentCaptor.forClass(Object.class);
  }
  if (annotation instanceof Spy) {
    throw new IllegalArgumentException("@Spy is not yet supported.");
  }
  return null;
}
