{
  Class<?> type=field.getType();
  if (!ArgumentCaptor.class.isAssignableFrom(type)) {
    throw new MockitoException("@Captor field must be of the type ArgumentCaptor.\n" + "Field: '" + field.getName() + "' has wrong type\n"+ "For info how to use @Captor annotations see examples in javadoc for MockitoAnnotations class.");
  }
  Type generic=field.getGenericType();
  if (generic != null && generic instanceof ParameterizedType) {
    Type actual=((ParameterizedType)generic).getActualTypeArguments()[0];
    return ArgumentCaptor.forClass(typeToClass(actual));
  }
  return ArgumentCaptor.forClass(Object.class);
}
