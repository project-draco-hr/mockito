{
  Type genericReturnType=method.getGenericReturnType();
  if (genericReturnType instanceof ParameterizedType) {
    ParameterizedType parameterizedType=(ParameterizedType)genericReturnType;
    if (parameterizedType.getActualTypeArguments().length <= 0) {
      return null;
    }
    Type type=parameterizedType.getActualTypeArguments()[0];
    if (type instanceof Class) {
      return (Class)type;
    }
    if (type instanceof TypeVariable) {
      throw new IllegalStateException();
    }
    if (type instanceof ParameterizedType) {
      throw new IllegalStateException();
    }
    return null;
  }
  return null;
}
