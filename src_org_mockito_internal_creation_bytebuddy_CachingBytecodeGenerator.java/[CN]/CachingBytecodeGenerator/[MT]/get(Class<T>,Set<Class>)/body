{
  avoidingClassLeakCacheLock.lock();
  try {
    ConcurrentHashMap<MockKey,WeakReference<Class>> mockCache=mockCachePerClassLoaderOf(mockedType);
    Class generatedMockClass=getOrGenerateMockClass(mockCache,mockedType,interfaces);
    return generatedMockClass;
  }
  finally {
    avoidingClassLeakCacheLock.unlock();
  }
}
