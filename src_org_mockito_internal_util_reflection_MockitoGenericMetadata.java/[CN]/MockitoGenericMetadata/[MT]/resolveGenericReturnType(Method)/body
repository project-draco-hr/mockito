{
  Type genericReturnType=method.getGenericReturnType();
  if (genericReturnType instanceof Class) {
    return new NotGenericReturnType(genericReturnType);
  }
  if (genericReturnType instanceof ParameterizedType) {
    return new ParameterizedReturnType(this,method.getTypeParameters(),(ParameterizedType)method.getGenericReturnType());
  }
  if (genericReturnType instanceof TypeVariable) {
    return new TypeVariableReturnType(this,method.getTypeParameters(),(TypeVariable)genericReturnType);
  }
  throw new MockitoException("Ouch, it shouldn't happen, type '" + genericReturnType.getClass().getCanonicalName() + "' on method : '"+ method.toGenericString()+ "' is not supported : "+ genericReturnType);
}
