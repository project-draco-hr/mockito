{
  ClassLoader classpath_without_objenesis=ClassLoaders.excludingClassLoader().withCodeSourceUrlOf(Mockito.class,ByteBuddy.class).without("org.objenesis").build();
  boolean initialize_class=true;
  Class<?> mock_maker_class_loaded_fine_until=Class.forName("org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker",initialize_class,classpath_without_objenesis);
  try {
    mock_maker_class_loaded_fine_until.newInstance();
    fail();
  }
 catch (  Throwable e) {
    assertThat(e).isInstanceOf(IllegalStateException.class);
    assertThat(e.getMessage()).containsIgnoringCase("objenesis").contains("missing");
  }
}
