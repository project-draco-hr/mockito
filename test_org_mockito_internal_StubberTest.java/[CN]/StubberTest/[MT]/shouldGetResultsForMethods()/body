{
  Invocation simpleMethod=new InvocationBuilder().method("simpleMethod").toInvocation();
  stubber.setInvocationForPotentialStubbing(new InvocationMatcher(simpleMethod));
  stubber.addReturnValue("simpleMethod");
  Invocation differentMethod=new InvocationBuilder().method("differentMethod").toInvocation();
  stubber.setInvocationForPotentialStubbing(new InvocationMatcher(differentMethod));
  stubber.addThrowable(new IllegalStateException());
  assertEquals("simpleMethod",stubber.resultFor(simpleMethod));
  try {
    stubber.resultFor(differentMethod);
    fail();
  }
 catch (  IllegalStateException e) {
  }
}
