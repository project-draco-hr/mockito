{
  ClassReader reader=getClassReader(file);
  String name[]=ClassNameReader.getClassInfo(reader);
  ClassWriter w=new DebuggingClassWriter(ClassWriter.COMPUTE_MAXS);
  ClassTransformer t=getClassTransformer(name);
  if (t != null) {
    if (verbose) {
      log("processing " + file.toURL());
    }
    new TransformingClassGenerator(new ClassReaderGenerator(getClassReader(file),attributes(),getFlags()),t).generateClass(w);
    FileOutputStream fos=new FileOutputStream(file);
    try {
      fos.write(w.toByteArray());
    }
  finally {
      fos.close();
    }
  }
}
