{
  ClassReader reader=new ClassReader(new ByteArrayInputStream(bytes));
  String name[]=ClassNameReader.getClassInfo(reader);
  ClassWriter w=new DebuggingClassWriter(ClassWriter.COMPUTE_MAXS);
  ClassTransformer t=getClassTransformer(name);
  if (t != null) {
    if (verbose) {
      log("processing " + name[0]);
    }
    new TransformingClassGenerator(new ClassReaderGenerator(new ClassReader(new ByteArrayInputStream(bytes)),attributes(),getFlags()),t).generateClass(w);
    ByteArrayOutputStream out=new ByteArrayOutputStream();
    out.write(w.toByteArray());
    return out.toByteArray();
  }
  return bytes;
}
