{
  Type genericReturnType=invocation.getMethod().getGenericReturnType();
  if (genericReturnType instanceof Class) {
    return mock((Class<?>)genericReturnType,this);
  }
  MockitoGenericMetadata mockitoGenericMetadata=actualParameterizedType(invocation.getMock()).resolveParameterizedType(genericReturnType);
  return mock(mockitoGenericMetadata.rawType(),((MockSettingsImpl)withSettings().defaultAnswer(this)).withParameterizedInfo(mockitoGenericMetadata));
}
