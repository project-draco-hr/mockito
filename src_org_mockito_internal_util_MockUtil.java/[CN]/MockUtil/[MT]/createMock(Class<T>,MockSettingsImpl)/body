{
  creationValidator.validateType(classToMock);
  creationValidator.validateExtraInterfaces(classToMock,settings.getExtraInterfaces());
  creationValidator.validateMockedType(classToMock,settings.getSpiedInstance());
  settings.initiateMockName(classToMock);
  MethodInterceptorFilter filter=newMethodInterceptorFilter(settings);
  Class<?>[] ancillaryTypes=prepareAncillaryTypes(settings);
  T mock=ClassImposterizer.INSTANCE.imposterise(filter,classToMock,ancillaryTypes);
  Object spiedInstance=settings.getSpiedInstance();
  if (spiedInstance != null) {
    new LenientCopyTool().copyToMock(spiedInstance,mock);
  }
  return mock;
}
