{
  int actuallyInvoked=numberOfActualInvocations(invocation);
  if (verifyingMode.numberOfInvocationsMatters()) {
    int expectedInvoked=verifyingMode.getExactNumberOfInvocations();
    if (actuallyInvoked != expectedInvoked) {
      throw new NumberOfInvocationsAssertionError(expectedInvoked,actuallyInvoked);
    }
  }
 else {
    if (actuallyInvoked == 0) {
      InvocationWithMatchers similarInvocation=findSimilarInvocation(invocation);
      String message="\n" + "Failure on verify:" + "\n";
      String expected=invocation.toString();
      if (similarInvocation != null) {
        String actual=similarInvocation.toString();
        if (expected.equals(actual)) {
          expected=invocation.toStringWithTypes();
          actual=similarInvocation.toStringWithTypes();
        }
        message+="Expected: " + expected + "\n"+ "Actual: "+ actual;
      }
 else {
        message+="Expected: " + expected + "\n"+ "Actual: none";
      }
      throw new VerificationAssertionError(message);
    }
  }
}
