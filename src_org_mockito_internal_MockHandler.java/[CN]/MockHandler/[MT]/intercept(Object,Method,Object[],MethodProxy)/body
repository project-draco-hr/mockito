{
  if (stubber.hasAnswerForVoidMethod()) {
    Invocation invocation=new Invocation(proxy,method,args,mockingProgress.nextSequenceNumber());
    InvocationMatcher invocationMatcher=matchersBinder.bindMatchers(invocation);
    stubber.addVoidMethodForStubbing(invocationMatcher);
    return null;
  }
  VerificationModeImpl verificationMode=mockingProgress.pullVerificationMode();
  mockingProgress.validateState();
  Invocation invocation=new Invocation(proxy,method,args,mockingProgress.nextSequenceNumber());
  InvocationMatcher invocationMatcher=matchersBinder.bindMatchers(invocation);
  if (verificationMode != null) {
    verifyingRecorder.verify(invocationMatcher,verificationMode);
    return null;
  }
  stubber.setInvocationForPotentialStubbing(invocationMatcher);
  verifyingRecorder.recordInvocation(invocationMatcher.getInvocation());
  mockingProgress.reportOngoingStubbing(new OngoingStubbingImpl());
  if (stubber.hasResultFor(invocation)) {
    return stubber.getResultFor(invocation);
  }
 else   if (MockUtil.isMock(instance)) {
    return Configuration.instance().getReturnValues().valueFor(invocation);
  }
 else {
    return methodProxy.invoke(instance,args);
  }
}
